<script type="text/javascript">
    RED.nodes.registerType('odata in', {
        category: 'odata',
        color: '#d24714',
        defaults: {
            name: { value: "" }
        },
        inputs: 1,
        outputs: 1,
        icon: 'font-awesome/fa-angle-double-right',
        label: function () {
            return this.name || "odata in";
        }
    });
</script>

<script type="text/html" data-template-name="odata in">
    <div class="form-row">
        <label for="node-input-name">Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <p>To support model specific query generation :</p>
    <p> set msg.model object to a valid data model using a function node</p>

    <p>Example :</p>
    <pre>
{
    namespace: "ignite",
    entityTypes: {
        "users": {
            "id": {"type": "Edm.Int32", "key": true},
            "name": {"type": "Edm.String"},            
            "username": {"type": "Edm.String"}            
        }
    },   
    entitySets: {
        "users": {
            entityType: "ignite.users"
        }
    }
}
    </pre>
</pre>
<p>Entity Data Model (EDM) types for OData Version 4.0</p>
<pre>
    INTEGER             Edm.Int32
    VARCHAR             Edm.String
    BOOLEAN/BIT         Edm.Boolean
    DOUBLE/FLOAT        Edm.Double
    DECIMAL             Edm.Decimal
    DATE                Edm.Date
    TIMESTAMP           Edm.DateTimeOffset
</pre>
</script>

<script type="text/html" data-help-name="odata in">
    <p style="color:#AD1625; font-weight:bold;">
        A node that resolves an Odata Complaint API (URL) into sql statements
    </p>
    <div>
        1. Connect the input of<i style="color:#AD1625;">odata in</i> Node to an http in Node.
        <br>
        2. The http in node must have a method type selected to accept an incoming request http to for that http method.
        <br>
        3. The http in node must have <i style="color:#AD1625;">/example/</i> or <i style="color:#AD1625;">/odata/</i> appended to the url 
        to act as service root url for your odata service.
        <br>
        4. After the root URL, type in a valid odata url or append <i style="color:#AD1625;">*</i> to accept all the requests matching the root url.
        <br>
        5. The odata node resolves the incoming request into sql statements and returns the queries inside <i style="color:#AD1625;">msg.payload.queries</i> for each db type it supports.
        <br>
        6. <i style="color:#AD1625; font-weight:bold;">Supports following Database Types:</i>
        <ol>
            <li>db2</li>
            <li>maria db</li>
            <li>sql server</li>
            <li>mysql</li>
            <li>oracle</li>
            <li>postgres</li>
            <li>sqlite</li>
        </ol> 
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('odata out', {
        category: 'odata',
        color: '#d24714',
        defaults: {
            name: { value: "" }
        },
        inputs: 1,
        outputs: 1,
        icon: 'font-awesome/fa-angle-double-right',
        align: 'right',
        label: function () {
            return this.name || "odata out";
        }
    });
</script>

<script type="text/html" data-template-name="odata out">
    <div class="form-row">
        <label for="node-input-name">Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <br>
    <p>To support incoming metadata requests, please provide a data model in the following format</p>
    <pre>
{
    namespace: "ignite",
    entityTypes: {
        "users": {
            "id": {"type": "Edm.Int32", "key": true},
            "name": {"type": "Edm.String"},            
            "username": {"type": "Edm.String"}            
        }
    },   
    entitySets: {
        "users": {
            entityType: "ignite.users"
        }
    }
}
    </pre>
    <p>Entity Data Model (EDM) types for OData Version 4.0</p>
    <pre>
        INTEGER             Edm.Int32
        VARCHAR             Edm.String
        BOOLEAN/BIT         Edm.Boolean
        DOUBLE/FLOAT        Edm.Double
        DECIMAL             Edm.Decimal
        DATE                Edm.Date
        TIMESTAMP           Edm.DateTimeOffset
    </pre>
</script>

<script type="text/html" data-help-name="odata out">
    <p style="color:#AD1625; font-weight:bold;">
        A node that returns an odata compatible response
    </p>
    <div>
        1. Connect the odata out node to any node serving it data in msg.payload.
        <br>
        2. The messages sent to this node must originate from an odata in node.
        <br>
        3. odata out node will convert the msg.payload into odata compatible format.
        <br>
        4. To serve the metadata requests the user must provide a data model to the odata in node.
        <br>
        5. This can be done by inserting a function node and setting the <i style="color:#AD1625;">msg.model</i> object to a valid data model.
        <br>
        7. If the request comes for metadata, the node will return an edmx xml for the model provided by the user.
        <br>
    </div>
</script>